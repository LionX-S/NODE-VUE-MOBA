{"version":3,"sources":["webpack:///./src/views/ItemEdit.vue?2631","webpack:///./src/views/ItemEdit.vue?d14f","webpack:///src/views/ItemEdit.vue","webpack:///./src/views/ItemEdit.vue?7a12","webpack:///./src/views/ItemEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","id","attrs","nativeOn","$event","preventDefault","save","model","value","callback","$$v","$set","expression","upLoadUrl","getAuthHeaders","afterUpload","icon","staticRenderFns","component"],"mappings":"gHAAA,yBAAue,EAAG,G,gECA1e,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,KAAK,CAACJ,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,GAAG,KAAK,MAAM,QAAQL,EAAG,UAAU,CAACM,MAAM,CAAC,cAAc,SAASC,SAAS,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBb,EAAIc,KAAKF,MAAW,CAACR,EAAG,eAAe,CAACM,MAAM,CAAC,MAAQ,OAAO,CAACN,EAAG,WAAW,CAACW,MAAM,CAACC,MAAOhB,EAAIe,MAAU,KAAEE,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIe,MAAO,OAAQG,IAAME,WAAW,iBAAiB,GAAGhB,EAAG,eAAe,CAACM,MAAM,CAAC,MAAQ,OAAO,CAACN,EAAG,YAAY,CAACE,YAAY,kBAAkBI,MAAM,CAAC,OAASV,EAAIqB,UAAU,QAAUrB,EAAIsB,iBAAiB,kBAAiB,EAAM,aAAatB,EAAIuB,cAAc,CAAEvB,EAAIe,MAAU,KAAEX,EAAG,MAAM,CAACE,YAAY,SAASI,MAAM,CAAC,IAAMV,EAAIe,MAAMS,QAAQpB,EAAG,IAAI,CAACE,YAAY,mDAAmD,GAAGF,EAAG,eAAe,CAACA,EAAG,YAAY,CAACM,MAAM,CAAC,KAAO,UAAU,cAAc,WAAW,CAACV,EAAIO,GAAG,SAAS,IAAI,IAAI,IACp7BkB,EAAkB,G,wBC+BtB,GACE,KAAF,WACE,MAAF,CACI,GAAJ,IAEE,KALF,WAMI,MAAJ,CACM,MAAN,CACQ,KAAR,GACQ,KAAR,MAME,QAAF,CACI,KADJ,WACM,IAAN,OAAM,OAAN,gJAGA,KAHA,gCAIA,gDAJA,OAIA,EAJA,6CAMA,mCANA,OAMA,EANA,cAQA,kBACA,8BACA,YACA,eACA,0BAGA,YACA,aACA,yBAjBA,+CAqBI,MAtBJ,WAsBM,IAAN,OAAM,OAAN,4JACA,wCADA,OACA,EADA,OAEA,iBACA,yBAEA,YACA,aACA,yBAPA,8CAuBI,YA7CJ,SA6CA,GAEM,KAAN,gCAGE,QAjEF,WAmEI,KAAJ,mBCnGkV,I,wBCQ9UC,EAAY,eACd,EACA3B,EACA0B,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"js/chunk-1ff0db4b.47cda021.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemEdit.vue?vue&type=style&index=0&id=65f7e817&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemEdit.vue?vue&type=style&index=0&id=65f7e817&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\"},[_c('h1',[_vm._v(_vm._s(_vm.id?'编辑':'新建')+\"物品\")]),_c('el-form',{attrs:{\"label-width\":\"120px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.save($event)}}},[_c('el-form-item',{attrs:{\"label\":\"名称\"}},[_c('el-input',{model:{value:(_vm.model.name),callback:function ($$v) {_vm.$set(_vm.model, \"name\", $$v)},expression:\"model.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"图标\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.upLoadUrl,\"headers\":_vm.getAuthHeaders(),\"show-file-list\":false,\"on-success\":_vm.afterUpload}},[(_vm.model.icon)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.model.icon}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon el-upload\"})])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"native-type\":\"submit\"}},[_vm._v(\"保存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"about\">\r\n    <h1>{{id?'编辑':'新建'}}物品</h1>\r\n    <el-form label-width=\"120px\" @submit.native.prevent=\"save\">\r\n<!--      <el-form-item label=\"上级分类\">-->\r\n<!--        <el-select v-model=\"model.parentId\">-->\r\n<!--          <el-option v-for=\"item in parents\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>-->\r\n<!--        </el-select>-->\r\n<!--      </el-form-item>-->\r\n      <el-form-item label=\"名称\">\r\n        <el-input v-model=\"model.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"图标\">\r\n        <el-upload\r\n                class=\"avatar-uploader\"\r\n                :action=\"upLoadUrl\"\r\n                :headers=\"getAuthHeaders()\"\r\n                :show-file-list=\"false\"\r\n                :on-success=\"afterUpload\">\r\n          <img v-if=\"model.icon\" :src=\"model.icon\" class=\"avatar\">\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon el-upload\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <!--        native-type表示原生html里面为submit按钮-->\r\n        <el-button type=\"primary\" native-type=\"submit\">保存</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"ItemEdit\",\r\n    props: {\r\n      id: {}\r\n    },\r\n    data() {\r\n      return {\r\n        model: {\r\n          name:'',\r\n          icon:''\r\n        },\r\n        // //父级分类\r\n        // parents:[]\r\n      }\r\n    },\r\n    methods: {\r\n      async save() {\r\n        let res;\r\n        //根据id进行判断，有id就修改，没有id就新增\r\n        if(this.id){\r\n          res = await this.$http.put(`rest/items/${this.id}`, this.model);\r\n        }else{\r\n          res = await this.$http.post('rest/items', this.model);\r\n        }\r\n        if (res.data.code == 200) {\r\n          this.$router.push('/items/list');\r\n          this.$message({\r\n            type: 'success',\r\n            message: res.data.message\r\n          });\r\n        } else {\r\n          this.$message({\r\n            type: 'error',\r\n            message: res.data.message\r\n          });\r\n        }\r\n      },\r\n      async fetch(){\r\n        const res=await this.$http.get(`rest/items/${this.id}`);\r\n        if(res.data.code==200){\r\n          this.model=res.data.result[0];\r\n        }else {\r\n          this.$message({\r\n            type: 'error',\r\n            message: res.data.message\r\n          });\r\n        }\r\n      },\r\n      // async fetchParents(){\r\n      //   const res=await this.$http.get(`rest/items`);\r\n      //   if(res.data.code==200){\r\n      //     // this.parents=res.data.result.filter(items=>items.parentId==null);\r\n      //     this.parents=res.data.result;\r\n      //   }else {\r\n      //     this.$message({\r\n      //       type: 'error',\r\n      //       message: res.data.message\r\n      //     });\r\n      //   }\r\n      // },\r\n      afterUpload(res){\r\n        // console.log(res);\r\n        this.$set(this.model,'icon',res.url);\r\n      }\r\n    },\r\n    created() {\r\n      // this.fetchParents();\r\n      this.id && this.fetch();\r\n    },\r\n\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 5rem;\r\n    height: 5rem;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 5rem;\r\n    height: 5rem;\r\n    display: block;\r\n  }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ItemEdit.vue?vue&type=template&id=65f7e817&scoped=true&\"\nimport script from \"./ItemEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ItemEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ItemEdit.vue?vue&type=style&index=0&id=65f7e817&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"65f7e817\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}